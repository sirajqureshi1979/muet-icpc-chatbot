<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MS Teams Password Reset - MUET</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    </style>
</head>
<body class="min-h-screen bg-slate-100">
    <!-- Top Bar -->
    <div class="bg-slate-900 text-white text-sm py-2 px-4">
        <div class="max-w-6xl mx-auto flex justify-between items-center flex-wrap gap-2">
            <span class="text-slate-400">Official Website of Mehran University</span>
            <div class="flex items-center gap-4">
                <a href="#" class="text-cyan-400 hover:text-cyan-300">Alumni Network ‚Üó</a>
                <a href="#" class="text-cyan-400 hover:text-cyan-300">Departments</a>
                <a href="#" class="text-cyan-400 hover:text-cyan-300">Webmail</a>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-slate-800 py-4 px-4 shadow-lg">
        <div class="max-w-6xl mx-auto flex justify-between items-center flex-wrap gap-4">
            <div class="flex items-center gap-4">
                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg overflow-hidden">
                    <img src="https://www.muet.edu.pk/sites/default/files/images/MUET%20Logo.png" alt="MUET Logo" class="w-14 h-14 object-contain" onerror="this.style.display='none'">
                </div>
                <div>
                    <h1 class="text-white text-xl font-bold tracking-wide">MEHRAN UNIVERSITY</h1>
                    <p class="text-cyan-400 text-xs font-semibold">OF ENGINEERING & TECHNOLOGY</p>
                    <p class="text-amber-400 text-xs">JAMSHORO, PAKISTAN</p>
                </div>
            </div>
            <nav class="flex gap-2 flex-wrap">
                <a href="#" class="text-white px-4 py-2 text-sm hover:bg-blue-800 rounded">About</a>
                <a href="#" class="text-white px-4 py-2 text-sm hover:bg-blue-800 rounded">Academics</a>
                <a href="#" class="text-white px-4 py-2 text-sm hover:bg-blue-800 rounded">Admissions</a>
                <a href="#" class="text-white px-4 py-2 text-sm hover:bg-blue-800 rounded">Research</a>
                <a href="#" class="text-cyan-400 px-4 py-2 text-sm bg-blue-800 rounded font-semibold">Students</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 py-16 px-4">
        <div class="max-w-6xl mx-auto">
            <div class="inline-block bg-cyan-500/20 border border-cyan-500/40 text-cyan-400 px-4 py-2 rounded-full text-sm mb-4">
                üîê ICPC Student Services
            </div>
            <h2 class="text-white text-4xl md:text-5xl font-bold mb-4">
                MS Teams Password
                <span class="text-cyan-400"> Reset Portal</span>
            </h2>
            <p class="text-slate-300 text-lg max-w-xl mb-6">
                Secure and instant password reset for MUET students. Your new password will be sent to your registered email.
            </p>
            <div class="flex gap-3 flex-wrap">
                <span class="bg-white/10 text-white px-4 py-2 rounded-lg text-sm">‚ö° Instant Reset</span>
                <span class="bg-white/10 text-white px-4 py-2 rounded-lg text-sm">üìß Email Delivery</span>
                <span class="bg-white/10 text-white px-4 py-2 rounded-lg text-sm">üîí Secure Process</span>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="py-10 px-4">
        <div class="max-w-6xl mx-auto">
            <nav class="text-sm mb-6">
                <a href="#" class="text-slate-700 hover:underline">Home</a>
                <span class="mx-2 text-slate-400">‚Ä∫</span>
                <a href="#" class="text-slate-700 hover:underline">Students</a>
                <span class="mx-2 text-slate-400">‚Ä∫</span>
                <span class="text-cyan-600 font-semibold">MS Teams Password Reset</span>
            </nav>

            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Form Card -->
                <div class="lg:col-span-2 bg-white rounded-2xl shadow-xl overflow-hidden">
                    <div class="h-1.5 bg-gradient-to-r from-cyan-500 via-blue-900 to-green-500"></div>
                    
                    <div class="p-8">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-14 h-14 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg">
                                <span class="text-2xl">üîë</span>
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold text-slate-800">Reset Your Password</h3>
                                <p class="text-cyan-600 text-sm font-medium">MS Teams Account Recovery</p>
                            </div>
                        </div>

                        <div id="formSection">
                            <div class="bg-cyan-50 border-l-4 border-cyan-500 p-4 rounded-r-lg mb-6">
                                <p class="text-slate-700 text-sm">
                                    ‚ÑπÔ∏è Enter your CNIC and Roll Number. A new password will be generated and sent to your registered university email.
                                </p>
                            </div>

                            <form id="resetForm" class="space-y-5">
                                <!-- CNIC Field -->
                                <div>
                                    <label class="block text-blue-900 font-semibold text-sm mb-2">
                                        CNIC Number <span class="text-red-500">*</span>
                                    </label>
                                    <div class="relative">
                                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-lg">üÜî</span>
                                        <input
                                            type="text"
                                            id="cnic"
                                            placeholder="41303-1234567-1"
                                            maxlength="15"
                                            required
                                            class="w-full pl-12 pr-12 py-4 border-2 border-slate-200 rounded-xl text-lg focus:border-cyan-500 focus:ring-4 focus:ring-cyan-100 outline-none transition-all"
                                        />
                                        <span id="cnicCheck" class="absolute right-4 top-1/2 -translate-y-1/2 text-green-500 text-xl font-bold hidden">‚úì</span>
                                    </div>
                                    <p class="text-slate-500 text-xs mt-1">Format: #####-#######-#</p>
                                </div>

                                <!-- Roll Number Field -->
                                <div>
                                    <label class="block text-blue-900 font-semibold text-sm mb-2">
                                        Roll Number <span class="text-red-500">*</span>
                                    </label>
                                    <div class="relative">
                                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-lg">üìã</span>
                                        <input
                                            type="text"
                                            id="rollNumber"
                                            placeholder="23CS021"
                                            required
                                            class="w-full pl-12 pr-12 py-4 border-2 border-slate-200 rounded-xl text-lg focus:border-cyan-500 focus:ring-4 focus:ring-cyan-100 outline-none transition-all"
                                        />
                                        <span id="rollCheck" class="absolute right-4 top-1/2 -translate-y-1/2 text-green-500 text-xl font-bold hidden">‚úì</span>
                                    </div>
                                    <p class="text-slate-500 text-xs mt-1">Example: 23CS021, 22EE015</p>
                                </div>

                                <!-- Error Message -->
                                <div id="errorMessage" class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center gap-3 hidden">
                                    <span>‚ö†Ô∏è</span>
                                    <span id="errorText"></span>
                                </div>

                                <!-- Submit Button -->
                                <button
                                    type="submit"
                                    id="submitBtn"
                                    class="w-full py-4 rounded-xl text-white font-semibold text-lg flex items-center justify-center gap-3 transition-all bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 shadow-lg hover:shadow-xl hover:-translate-y-0.5"
                                >
                                    Reset Password
                                    <span class="text-xl">‚Üí</span>
                                </button>
                            </form>

                            <div class="mt-6 bg-green-50 text-green-700 text-sm py-3 px-4 rounded-xl text-center flex items-center justify-center gap-2">
                                <span>üîí</span>
                                <span>Your data is encrypted and secure</span>
                            </div>
                        </div>

                        <!-- Success Section -->
                        <div id="successSection" class="text-center py-6 hidden">
                            <div class="text-7xl mb-4">‚úÖ</div>
                            <h4 class="text-2xl font-bold text-green-600 mb-3">Password Reset Successful!</h4>
                            <p class="text-slate-600 mb-6" id="successMessage"></p>
                            
                            <div class="bg-green-50 rounded-xl p-6 text-left mb-6">
                                <h5 class="font-semibold text-green-700 mb-3">üìå Next Steps:</h5>
                                <ol class="text-slate-700 space-y-2 list-decimal list-inside">
                                    <li>Check your registered email inbox</li>
                                    <li>Also check spam/junk folder</li>
                                    <li>Log in to MS Teams with new password</li>
                                    <li>Change password immediately for security</li>
                                </ol>
                            </div>

                            <a href="https://teams.microsoft.com" target="_blank" rel="noopener noreferrer" class="inline-block bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 mb-4">
                                Open Microsoft Teams ‚Üí
                            </a>
                            <br />
                            <button onclick="resetFormView()" class="text-blue-900 border-2 border-blue-900 px-6 py-3 rounded-xl font-semibold hover:bg-blue-50">
                                ‚Üê Reset Another Password
                            </button>
                        </div>

                        <!-- Error Section -->
                        <div id="errorSection" class="text-center py-6 hidden">
                            <div class="text-7xl mb-4">‚ùå</div>
                            <h4 class="text-2xl font-bold text-red-600 mb-3">Reset Failed</h4>
                            <p class="text-slate-600 mb-6" id="failureMessage"></p>
                            
                            <div class="bg-amber-50 rounded-xl p-6 text-left mb-6">
                                <h5 class="font-semibold text-amber-700 mb-3">üÜò Need Help?</h5>
                                <p class="text-slate-700">
                                    üìç IEC Building, MUET<br/>
                                    üìß icpc.support@admin.muet.edu.pk<br/>
                                    üïê Mon-Fri: 8:00 AM - 3:00 PM
                                </p>
                            </div>

                            <button onclick="resetFormView()" class="text-blue-900 border-2 border-blue-900 px-6 py-3 rounded-xl font-semibold hover:bg-blue-50">
                                ‚Üê Try Again
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="space-y-5">
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h4 class="font-bold text-blue-900 mb-4 flex items-center gap-2">
                            <span>üìã</span> Requirements
                        </h4>
                        <ul class="text-slate-600 text-sm space-y-2">
                            <li>‚úì Valid CNIC registered with MUET</li>
                            <li>‚úì Active student Roll Number</li>
                            <li>‚úì Access to registered email</li>
                        </ul>
                    </div>

                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h4 class="font-bold text-blue-900 mb-4 flex items-center gap-2">
                            <span>‚ö°</span> Quick Links
                        </h4>
                        <div class="space-y-3">
                            <a href="https://teams.microsoft.com" target="_blank" rel="noopener noreferrer" class="flex justify-between text-blue-900 hover:text-cyan-600 text-sm py-2 border-b border-slate-100">
                                Microsoft Teams <span class="text-cyan-500">‚Üó</span>
                            </a>
                            <a href="https://www.muet.edu.pk" target="_blank" rel="noopener noreferrer" class="flex justify-between text-blue-900 hover:text-cyan-600 text-sm py-2 border-b border-slate-100">
                                MUET Website <span class="text-cyan-500">‚Üó</span>
                            </a>
                            <a href="#" class="flex justify-between text-blue-900 hover:text-cyan-600 text-sm py-2 border-b border-slate-100">
                                Student Portal <span class="text-cyan-500">‚Üó</span>
                            </a>
                        </div>
                    </div>

                    <div class="bg-blue-900 rounded-xl p-6 shadow-lg text-white">
                        <h4 class="font-bold mb-4 flex items-center gap-2">
                            <span>üÜò</span> Need Help?
                        </h4>
                        <div class="text-sm text-slate-200 space-y-2">
                            <p class="font-semibold text-white">ICPC Office</p>
                            <p>üìç IEC Building, MUET</p>
                            <p>üìß icpc.support@admin.muet.edu.pk</p>
                            <p>üïê Mon-Fri: 8:00 AM - 3:00 PM</p>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h4 class="font-bold text-blue-900 mb-4 flex items-center gap-2">
                            <span>üõ†Ô∏è</span> Other Services
                        </h4>
                        <div class="text-slate-600 text-sm space-y-3">
                            <div class="flex items-center gap-3 py-2 border-b border-slate-100">
                                <span>üåê</span> Internet Password Reset
                            </div>
                            <div class="flex items-center gap-3 py-2 border-b border-slate-100">
                                <span>üìä</span> MIS Portal Support
                            </div>
                            <div class="flex items-center gap-3 py-2">
                                <span>üìù</span> Examination Portal
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-white mt-12">
        <div class="max-w-6xl mx-auto px-4 py-12">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center text-2xl shrink-0">üéì</div>
                        <div>
                            <h5 class="font-bold text-sm">MEHRAN UNIVERSITY</h5>
                            <p class="text-cyan-400 text-xs">OF ENGINEERING & TECHNOLOGY</p>
                        </div>
                    </div>
                    <p class="text-slate-400 text-sm leading-relaxed">
                        Jamshoro, 76062, Sindh, Pakistan<br/>
                        Empowering the Future Innovators
                    </p>
                </div>
                <div>
                    <h5 class="text-cyan-400 font-bold mb-4 text-sm">ICPC Services</h5>
                    <ul class="text-slate-400 text-sm space-y-2">
                        <li class="hover:text-cyan-400 transition-colors cursor-pointer">MS Teams Password Reset</li>
                        <li class="hover:text-cyan-400 transition-colors cursor-pointer">Internet Password Reset</li>
                        <li class="hover:text-cyan-400 transition-colors cursor-pointer">Email Support</li>
                        <li class="hover:text-cyan-400 transition-colors cursor-pointer">Network Services</li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-cyan-400 font-bold mb-4 text-sm">Contact ICPC</h5>
                    <div class="text-slate-400 text-sm space-y-2 leading-relaxed">
                        <p>üìç IEC Building, MUET</p>
                        <p>üìß icpc.support@admin.muet.edu.pk</p>
                        <p>üïê Mon-Fri: 8:00 AM - 3:00 PM</p>
                    </div>
                </div>
                <div>
                    <h5 class="text-cyan-400 font-bold mb-4 text-sm">Connect With Us</h5>
                    <div class="flex gap-3">
                        <a href="#" class="w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center cursor-pointer hover:bg-cyan-600 transition-colors text-lg">f</a>
                        <a href="#" class="w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center cursor-pointer hover:bg-cyan-600 transition-colors text-sm font-bold">in</a>
                        <a href="#" class="w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center cursor-pointer hover:bg-cyan-600 transition-colors text-lg">‚úï</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="border-t border-slate-800 py-4 px-4 text-center text-slate-500 text-sm">
            ¬© 2009-2026 Mehran University of Engineering & Technology, Jamshoro. All Rights Reserved.
        </div>
    </footer>

    <script>
        // ============================================
        // CONFIGURATION - UPDATE THIS URL
        // ============================================
        const WEBHOOK_URL = "https://elaina-nonacceptual-sulema.ngrok-free.dev/webhook/test-reset-password";

        // Form elements
        const cnicInput = document.getElementById('cnic');
        const rollNumberInput = document.getElementById('rollNumber');
        const resetForm = document.getElementById('resetForm');
        const submitBtn = document.getElementById('submitBtn');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const cnicCheck = document.getElementById('cnicCheck');
        const rollCheck = document.getElementById('rollCheck');

        // Sections
        const formSection = document.getElementById('formSection');
        const successSection = document.getElementById('successSection');
        const errorSection = document.getElementById('errorSection');
        const successMessage = document.getElementById('successMessage');
        const failureMessage = document.getElementById('failureMessage');

        // Format CNIC
        function formatCNIC(value) {
            const digits = value.replace(/\D/g, '');
            if (digits.length <= 5) return digits;
            if (digits.length <= 12) return `${digits.slice(0, 5)}-${digits.slice(5)}`;
            return `${digits.slice(0, 5)}-${digits.slice(5, 12)}-${digits.slice(12, 13)}`;
        }

        // Validate CNIC
        function validateCNIC(value) {
            return /^\d{5}-\d{7}-\d{1}$/.test(value);
        }

        // Validate Roll Number
        function validateRollNumber(value) {
            return /^\d{2}[A-Za-z]{2,4}\d{2,4}$/.test(value.trim());
        }

        // CNIC input handler
        cnicInput.addEventListener('input', (e) => {
            const formatted = formatCNIC(e.target.value);
            if (formatted.length <= 15) {
                e.target.value = formatted;
                cnicCheck.classList.toggle('hidden', !validateCNIC(formatted));
            }
        });

        // Roll Number input handler
        rollNumberInput.addEventListener('input', (e) => {
            e.target.value = e.target.value.toUpperCase();
            rollCheck.classList.toggle('hidden', !validateRollNumber(e.target.value));
        });

        // Form submission
        resetForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            errorMessage.classList.add('hidden');

            const cnic = cnicInput.value;
            const rollNumber = rollNumberInput.value;

            // Validate
            if (!validateCNIC(cnic)) {
                showError('Please enter valid CNIC: 12345-1234567-1');
                return;
            }
            if (!validateRollNumber(rollNumber)) {
                showError('Please enter valid Roll Number: 23CS021');
                return;
            }

            // Show loading
            submitBtn.disabled = true;
            submitBtn.innerHTML = `
                <svg class="animate-spin h-5 w-5" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"/>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
                </svg>
                Processing...
            `;

            try {
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        cnic: cnic,
                        rollNumber: rollNumber,
                        action: 'reset_ms_teams_password',
                        timestamp: new Date().toISOString()
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    showSuccess(data.message || 'Password reset successful! Check your email.');
                } else {
                    showFailure(data.message || 'Reset failed. Please contact ICPC Office.');
                }

            } catch (error) {
                console.error('Error:', error);
                showFailure('Network error. Please try again or contact ICPC Office.');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = `Reset Password <span class="text-xl">‚Üí</span>`;
            }
        });

        function showError(message) {
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
        }

        function showSuccess(message) {
            successMessage.textContent = message;
            formSection.classList.add('hidden');
            successSection.classList.remove('hidden');
        }

        function showFailure(message) {
            failureMessage.textContent = message;
            formSection.classList.add('hidden');
            errorSection.classList.remove('hidden');
        }

        function resetFormView() {
            formSection.classList.remove('hidden');
            successSection.classList.add('hidden');
            errorSection.classList.add('hidden');
            cnicInput.value = '';
            rollNumberInput.value = '';
            cnicCheck.classList.add('hidden');
            rollCheck.classList.add('hidden');
            errorMessage.classList.add('hidden');
        }
    </script>
</body>
</html>
